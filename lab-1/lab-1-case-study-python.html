<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.557">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;Shiyan Jiang">

<title>Lab 1: Text Mining Basics with Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="lab-1-case-study-python_files/libs/clipboard/clipboard.min.js"></script>
<script src="lab-1-case-study-python_files/libs/quarto-html/quarto.js"></script>
<script src="lab-1-case-study-python_files/libs/quarto-html/popper.min.js"></script>
<script src="lab-1-case-study-python_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="lab-1-case-study-python_files/libs/quarto-html/anchor.min.js"></script>
<link href="lab-1-case-study-python_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lab-1-case-study-python_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="lab-1-case-study-python_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="lab-1-case-study-python_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="lab-1-case-study-python_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> 0. INTRODUCTION</a>
  <ul class="collapse">
  <li><a href="#walkthrough-focus" id="toc-walkthrough-focus" class="nav-link" data-scroll-target="#walkthrough-focus"><span class="header-section-number">1.1</span> Walkthrough Focus</a></li>
  </ul></li>
  <li><a href="#prepare" id="toc-prepare" class="nav-link" data-scroll-target="#prepare"><span class="header-section-number">2</span> 1. PREPARE</a>
  <ul class="collapse">
  <li><a href="#a.-some-context" id="toc-a.-some-context" class="nav-link" data-scroll-target="#a.-some-context"><span class="header-section-number">2.1</span> 1a. Some Context</a></li>
  <li><a href="#b.-guiding-questions" id="toc-b.-guiding-questions" class="nav-link" data-scroll-target="#b.-guiding-questions"><span class="header-section-number">2.2</span> 1b. Guiding Questions</a></li>
  <li><a href="#c.-set-up" id="toc-c.-set-up" class="nav-link" data-scroll-target="#c.-set-up"><span class="header-section-number">2.3</span> 1c. Set Up</a></li>
  </ul></li>
  <li><a href="#wrangle" id="toc-wrangle" class="nav-link" data-scroll-target="#wrangle"><span class="header-section-number">3</span> 2. WRANGLE</a>
  <ul class="collapse">
  <li><a href="#a.-read-view-write-data-reading-text-files" id="toc-a.-read-view-write-data-reading-text-files" class="nav-link" data-scroll-target="#a.-read-view-write-data-reading-text-files"><span class="header-section-number">3.1</span> 2a. Read, View, Write Data: <strong>Reading Text Files</strong></a></li>
  <li><a href="#b.-writing-to-text-files" id="toc-b.-writing-to-text-files" class="nav-link" data-scroll-target="#b.-writing-to-text-files"><span class="header-section-number">3.2</span> <strong>2b. Writing to Text Files</strong></a></li>
  <li><a href="#c.-subset-columns" id="toc-c.-subset-columns" class="nav-link" data-scroll-target="#c.-subset-columns"><span class="header-section-number">3.3</span> 2c. Subset Columns</a></li>
  <li><a href="#d.-rename-columns" id="toc-d.-rename-columns" class="nav-link" data-scroll-target="#d.-rename-columns"><span class="header-section-number">3.4</span> 2d. Rename Columns</a></li>
  <li><a href="#e.-subset-rows" id="toc-e.-subset-rows" class="nav-link" data-scroll-target="#e.-subset-rows"><span class="header-section-number">3.5</span> 2e. Subset Rows</a></li>
  <li><a href="#f.-tokenization" id="toc-f.-tokenization" class="nav-link" data-scroll-target="#f.-tokenization"><span class="header-section-number">3.6</span> <strong>2f. Tokenization</strong></a></li>
  </ul></li>
  <li><a href="#explore" id="toc-explore" class="nav-link" data-scroll-target="#explore"><span class="header-section-number">4</span> 3. EXPLORE</a>
  <ul class="collapse">
  <li><a href="#a.-summary-stats" id="toc-a.-summary-stats" class="nav-link" data-scroll-target="#a.-summary-stats"><span class="header-section-number">4.1</span> 3a. Summary Stats</a></li>
  <li><a href="#b.-word-search" id="toc-b.-word-search" class="nav-link" data-scroll-target="#b.-word-search"><span class="header-section-number">4.2</span> 3b. Word Search</a></li>
  <li><a href="#c.-data-visualization" id="toc-c.-data-visualization" class="nav-link" data-scroll-target="#c.-data-visualization"><span class="header-section-number">4.3</span> 3c. Data Visualization</a></li>
  </ul></li>
  <li><a href="#model" id="toc-model" class="nav-link" data-scroll-target="#model"><span class="header-section-number">5</span> 4. MODEL</a></li>
  <li><a href="#communicate" id="toc-communicate" class="nav-link" data-scroll-target="#communicate"><span class="header-section-number">6</span> 5. COMMUNICATE</a>
  <ul class="collapse">
  <li><a href="#a.-select" id="toc-a.-select" class="nav-link" data-scroll-target="#a.-select"><span class="header-section-number">6.1</span> 5a. Select</a></li>
  <li><a href="#b.-polish" id="toc-b.-polish" class="nav-link" data-scroll-target="#b.-polish"><span class="header-section-number">6.2</span> 5b. Polish</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 1: Text Mining Basics with Python</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr.&nbsp;Shiyan Jiang </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> 0. INTRODUCTION</h2>
<p>In this case study, we’ll <strong>“walk through”</strong> a basic research workflow, or data analysis process, modeled after the Data-Intensive Research Workflow from <em>Learning Analytics Goes to School</em> (Krumm et al., 2018):</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/workflow.png" class="img-fluid figure-img"></p>
<figcaption>Figure 2.2 Steps of Data-Intensive Research Workflow</figcaption>
</figure>
</div>
<p>Each walkthrough will focus on a basic analysis using text mining techniques that you’ll be expected to reproduce, and apply to a new research question in independent practice, using the provided dataset or dataset of your own choosing.</p>
<p>We will focus on analysis of open-ended survey items from an evaluation of the North Carolina Department of Public Instruction (NCDPI) online professional development offered as part of the state’s <a href="https://www.fi.ncsu.edu/projects/evaluation-of-race-to-the-top/">Race to the Top</a> efforts.</p>
<section id="walkthrough-focus" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="walkthrough-focus"><span class="header-section-number">1.1</span> Walkthrough Focus</h3>
<p>Our focus will be on getting our text “tidy” so we can perform some basic word counts, look at words that occur at a higher rate in a group of documents, and examine words that are unique to those document groups. Specifically, the Walkthrough will cover the following workflow topics:</p>
<ol type="1">
<li><strong>Prepare</strong>: Prior to analysis, it’s critical to understand the context and data sources you’re working with so you can formulate useful and answerable questions. You’ll also need to set up a “Project” for our walkthrough.</li>
<li><strong>Wrangle</strong>: Wrangling data entails the work of manipulating, cleaning, transforming, and merging data. In section 2 we focus on reading, reducing, and tidying our data.</li>
<li><strong>Explore</strong>: In section 3, we use simple summary statistics, more sophisticated approaches like term frequency-inverse document frequency (tf-idf), and basic data visualization to explore our data and see what insight it provides in response to our question.</li>
</ol>
<hr>
</section>
</section>
<section id="prepare" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="prepare"><span class="header-section-number">2</span> 1. PREPARE</h2>
<p>Prior to analysis, it’s critical to understand the context and data sources available so you can formulate useful questions that can be feasibly addressed by your data. For this section, we’ll focus on the following topics:</p>
<ol type="a">
<li><strong>Context</strong>. We learn a little bit about the North Carolina Race to the Top grant and the evaluation of the online professional development work, including questions and findings from the 2012 report.</li>
<li><strong>Questions.</strong> What aspects of online professional development offerings do teachers find most valuable?</li>
<li><strong>Project Setup.</strong> We visit Chapter 6 from DSIEUR to set up a Project in RStudio and Python script for analysis.</li>
</ol>
<section id="a.-some-context" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="a.-some-context"><span class="header-section-number">2.1</span> 1a. Some Context</h3>
<section id="rtt-online-professional-development-evaluation" class="level4" data-number="2.1.1">
<h4 data-number="2.1.1" class="anchored" data-anchor-id="rtt-online-professional-development-evaluation"><span class="header-section-number">2.1.1</span> RTT Online Professional Development Evaluation</h4>
<p><img src="img/opd.png" class="img-fluid"></p>
<p><a href="https://github.com/laser-institute/essential-readings/blob/main/text%20mining/TMbasics.pdf">link to the report</a></p>
<p>North Carolina was one of 12 recipients of the 2010 federal Race to the Top (RttT) grants, bringing nearly $400 million to the state’s public school system. Over the course of four years, NC’s RttT coordinated a set of activities and policy reforms designed to collectively improve the performances of students, teachers, leaders, and schools.</p>
<p>The North Carolina Race to the Top (RttT) proposal (North Carolina Office of the Governor, 2010) specifies that the state’s Professional Development Initiative will focus on the “use of e-learning tools to meet the professional development needs of teachers, schools, and districts” (p.&nbsp;191). It points to research demonstrating that “well-designed and -implemented online professional development programs are not only valued by teachers but also positively impact classroom practices and student learning.”</p>
<p><strong>Data Source &amp; Analysis</strong></p>
<p>The evaluation used a wide range of data sources including interviews, document review, site analytics, and surveys, which we’ll focus on for this walkthrough. Survey protocols were designed in cooperation with NCDPI to systematically collect information about local professional development, state-level supports, use of available RttT professional development resources, and organizational and classroom practices in the schools, which will serve as a baseline to assess changes over the period of the North Carolina RttT initiatives.</p>
<p>Quantitative analyses focused primarily on descriptive analysis of item-level responses. In addition, quantitative data from these surveys were analyzed to examine patterns in responses by participants’ role, event type (e.g., module, webinar, resource), and region. Responses to open-ended survey items of the Online Resources Survey were manually coded by their relation to each Learning Forward professional development standard.</p>
<p>Note that the dataset we’ll be using for analysis in this walkthrough is exported as is from Qualtrics with personal identifiers, select demographics, metadata, and closed-ended responses removed.</p>
<p><strong>Summary of Findings</strong></p>
<p>Approximately half of the state’s educators completed at least one online module by the end of the 2011-12 school year. Overall, most participants agreed that the webinars and modules were relevant to their professional development needs, though some content was redundant with prior PD activities and not always content- or grade-specific, and some modules did not meet national standards. Most online modules were completed independently and not in Professional Learning Community groups.</p>
<p>A common theme from focus groups and open-ended survey responses was the convenience of online professional development. One teacher in a focus group stated, “I liked the format. And the way that it was given, it was at your own pace, which works well for our schedules…” Educators also frequently cited that the information and resources provided through the modules improved their understanding of the new standards and the teacher evaluation process. Webinar participants appreciated the useful, updated information presented through a combination of PowerPoint slides and video clips.</p>
<p>While the majority of educators have indicated their satisfaction with these resources, the findings suggest that the use of these resources at both the state and local level was not wholly consistent with national standards for online professional development. Many LEAs likely needed additional guidance, training, support, technology tools, and/or content resources to ensure that local efforts contribute to the quality of the experiences for educators and that the vision for online professional development outlined in the state’s RttT proposal is realized and can be sustained beyond RttT.</p>
</section>
</section>
<section id="b.-guiding-questions" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="b.-guiding-questions"><span class="header-section-number">2.2</span> 1b. Guiding Questions</h3>
<p>The State’s progress on designing and implementing online professional development was originally guided by the following (very) general evaluation questions:</p>
<ol type="1">
<li>State Strategies: To what extent did the state implement and support proposed RttT professional development efforts?</li>
<li>Short-Term Outcomes: What were direct outcomes of state-level RttT professional development efforts?</li>
</ol>
<p>For this walkthrough, we’ll use text mining to complement prior qualitative analyses conducted as part of the RttT Evaluation by examining responses to open-ended questions on the RttT Online PD Survey administered to over 15,000 NC educators.</p>
<p>Our (very) specific questions of interest for this walkthrough are:</p>
<ol type="1">
<li><strong>What aspects of online professional development offerings do <em>teachers</em> find most valuable?</strong></li>
<li><strong>How might resources differ in the value they afford teachers?</strong></li>
</ol>
<p>Finally, one overarching question we’ll explore throughout this lab, and that Silge and Robinson (2018) identify as a central question to text mining and natural language processing, is:</p>
<blockquote class="blockquote">
<p>How do we to <strong>quantify</strong> what a document or collection of documents is about?</p>
</blockquote>
</section>
<section id="c.-set-up" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="c.-set-up"><span class="header-section-number">2.3</span> 1c. Set Up</h3>
<p>Python has a series of powerful libraries or packages that provide a range of functions, making it easier to implement complex tasks and saving a lot of time. Before wrangling data, we need to install and import the necessary libraries, in this case, <code>pandas</code> and <code>nltk</code>, and for others, we can install later when needed. This can be done using <code>!pip install package_name</code> to install a library and <code>import package_name as alias</code>.</p>
<ul>
<li><p><code>!pip install</code> command: pip is the <a href="https://packaging.python.org/guides/tool-recommendations/">package installer</a> for Python, you can install libraries using <code>pip install package_name</code> in the <strong>terminal</strong>. While in <strong>Quarto Markdown (.qmd)</strong> files, when you’re executing code in a Python code chunk, you would typically use the <code>!pip</code> command to install Python packages into some . The exclamation mark (<strong><code>!</code></strong>) is a special character used in Jupyter and other interactive environments to denote that the command should be executed in the system shell rather than in the Python interpreter.</p></li>
<li><p><code>import</code> command: used to actually load libraries into your Python environment and make their functionality available for use in your code after downloading and installing those libraries with <code>!pip install</code>.</p></li>
<li><p><a href="https://pandas.pydata.org"><code>pandas</code></a>: a powerful and widely-used Python library for data manipulation and analysis. It provides data structures and functions needed to work seamlessly with structured data, such as tables and time series.</p></li>
<li><p><a href="https://www.google.com/url?sa=t&amp;source=web&amp;rct=j&amp;opi=89978449&amp;url=https://www.nltk.org/&amp;ved=2ahUKEwid7Pn-97-GAxWKMVkFHSOqBuUQFnoECB4QAQ&amp;usg=AOvVaw1cuWsEY8ZUmW75nSDfXo7m"><code>nltk</code></a>: a suite of libraries and programs for symbolic and statistical natural language processing for English written in the Python programming language. It supports classification, tokenization, stemming, tagging, parsing, and semantic reasoning functionalities.</p></li>
</ul>
<div id="f5a0755a" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install pandas </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install nltk</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: pandas in /cloud/project/r-reticulate/lib/python3.11/site-packages (2.2.2)
Requirement already satisfied: numpy&gt;=1.23.2 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from pandas) (1.26.4)
Requirement already satisfied: python-dateutil&gt;=2.8.2 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from pandas) (2.9.0.post0)
Requirement already satisfied: pytz&gt;=2020.1 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from pandas) (2024.1)
Requirement already satisfied: tzdata&gt;=2022.7 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from pandas) (2024.1)
Requirement already satisfied: six&gt;=1.5 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from python-dateutil&gt;=2.8.2-&gt;pandas) (1.16.0)

[notice] A new release of pip is available: 24.0 -&gt; 24.1.2
[notice] To update, run: pip install --upgrade pip
Requirement already satisfied: nltk in /cloud/project/r-reticulate/lib/python3.11/site-packages (3.8.1)
Requirement already satisfied: click in /cloud/project/r-reticulate/lib/python3.11/site-packages (from nltk) (8.1.7)
Requirement already satisfied: joblib in /cloud/project/r-reticulate/lib/python3.11/site-packages (from nltk) (1.4.2)
Requirement already satisfied: regex&gt;=2021.8.3 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from nltk) (2024.5.15)
Requirement already satisfied: tqdm in /cloud/project/r-reticulate/lib/python3.11/site-packages (from nltk) (4.66.2)

[notice] A new release of pip is available: 24.0 -&gt; 24.1.2
[notice] To update, run: pip install --upgrade pip</code></pre>
</div>
</div>
<div id="7f844301" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nltk</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
<section id="wrangle" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="wrangle"><span class="header-section-number">3</span> 2. WRANGLE</h2>
<p>In general, data wrangling involves some combination of cleaning, reshaping, transforming, and merging data (Wickham &amp; Grolemund, 2017). The importance of data wrangling is difficult to overstate, as it involves the initial steps of going from raw data to a dataset that can be explored and modeled (Krumm et al, 2018).</p>
<ol type="a">
<li><strong>Reading Data</strong>. Before working with data, we need to “read” it into Python. It also helps to inspect your data.</li>
<li><strong>Data Reduction</strong>. We focus on tools from the <code>pandas</code> library to view, rename, select, slice, and filter our data in preparation for analysis.</li>
<li><strong>Natural Language Toolkit (NLTK)</strong>. We’ll learn how to use the <code>nltk</code> library to tokenize our text in order to create a data frame to use for analysis.</li>
</ol>
<section id="a.-read-view-write-data-reading-text-files" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="a.-read-view-write-data-reading-text-files"><span class="header-section-number">3.1</span> 2a. Read, View, Write Data: <strong>Reading Text Files</strong></h3>
<p>To read text from a file, we can use the built-in <code>open()</code> function and various file reading methods, such as <code>read()</code>, <code>readline()</code>, or <code>readlines()</code>.</p>
<p>When working with structured document in Python, a tidy way to go is the use of the <code>pandas</code> library, which is a powerful data manipulation and analysis library in Python. Ensure you have the library installed before running the following code:</p>
<div id="3bb68d1f" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>opd_sentences <span class="op">=</span> [<span class="st">"levels of questioning and revised blooms"</span>, </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"None, really."</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Understanding the change"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"overview of reasons for change"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Knowing what needs to be done."</span>]</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(opd_sentences, columns<span class="op">=</span>[<span class="st">'text'</span>])</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">text</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>levels of questioning and revised blooms</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>None, really.</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Understanding the change</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>overview of reasons for change</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Knowing what needs to be done.</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="9dcffb59" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># find the number of characters for each string in df['text']</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'text'</span>].<span class="bu">str</span>.<span class="bu">len</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>0    40
1    13
2    24
3    30
4    30
Name: text, dtype: int64</code></pre>
</div>
</div>
<div id="ac4ab492" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># find the number of tokens for each string in df['text']</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'text'</span>].<span class="bu">str</span>.split().<span class="bu">str</span>.<span class="bu">len</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>0    6
1    2
2    3
3    5
4    6
Name: text, dtype: int64</code></pre>
</div>
</div>
<div id="e65033cb" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># find which entries contain the word 'Understanding'</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'text'</span>].<span class="bu">str</span>.contains(<span class="st">'Understanding'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>0    False
1    False
2     True
3    False
4    False
Name: text, dtype: bool</code></pre>
</div>
</div>
<p>You can use the following Python code to read the CSV file and display the first 4 rows along with the column names:</p>
<div id="7cda7cde" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify the file path</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>csv_file_path <span class="op">=</span> <span class="st">'data/opd_survey.csv'</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the CSV file into a pandas DataFrame</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>opd_survey <span class="op">=</span> pd.read_csv(csv_file_path)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first 4 rows</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"First 4 rows:"</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(opd_survey.head(<span class="dv">4</span>))</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the column names</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Column names:"</span>)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(opd_survey.columns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>First 4 rows:
                                        RecordedDate  \
0                                      Recorded Date   
1  {"ImportId":"recordedDate","timeZone":"America...   
2                                      3/14/12 12:41   
3                                      3/14/12 13:31   

                 ResponseId  \
0               Response ID   
1  {"ImportId":"_recordId"}   
2         R_6fKCyERAM07T4xK   
3         R_09rHleucd8tHHU0   

                                                Role  \
0  What is your role within your school district ...   
1                                {"ImportId":"QID2"}   
2  Central Office Staff (e.g. Superintendents, Te...   
3  Central Office Staff (e.g. Superintendents, Te...   

                                                 Q14  \
0  Please select the school level(s) you work wit...   
1                               {"ImportId":"QID15"}   
2                                               K-12   
3                           Elementary,Middle School   

                                                 Q16  \
0  Which content area(s) do you specialize in?  (...   
1                               {"ImportId":"QID16"}   
2  Elementary Education/Generalist,English Langua...   
3  Elementary Education/Generalist,English Langua...   

                                            Resource  \
0  Please indicate the online professional develo...   
1                                {"ImportId":"QID3"}   
2     Summer Institute/RESA PowerPoint Presentations   
3  Online Learning Module (e.g. Call for Change, ...   

                                     Resource_8_TEXT  \
0  Please indicate the online professional develo...   
1                         {"ImportId":"QID3_8_TEXT"}   
2                                                NaN   
3                                                NaN   

                                     Resource_9_TEXT  \
0  Please indicate the online professional develo...   
1                         {"ImportId":"QID3_9_TEXT"}   
2                                                NaN   
3                                                NaN   

                                    Resource_10_TEXT  \
0  Please indicate the online professional develo...   
1                        {"ImportId":"QID3_10_TEXT"}   
2                                                NaN   
3                                                NaN   

                                          Resource.1  \
0  What was the primary focus of the webinar you ...   
1                               {"ImportId":"QID29"}   
2                                                NaN   
3                                                NaN   

                                  Resource_10_TEXT.1  \
0  What was the primary focus of the webinar you ...   
1                       {"ImportId":"QID29_10_TEXT"}   
2                                                NaN   
3                                                NaN   

                                               Q16.1  \
0  Which primary content area(s) did the webinar ...   
1                               {"ImportId":"QID31"}   
2                                                NaN   
3                                                NaN   

                                          Q16_9_TEXT  \
0  Which primary content area(s) did the webinar ...   
1                        {"ImportId":"QID31_9_TEXT"}   
2                                                NaN   
3                                                NaN   

                                                 Q19  \
0  Please specify the online learning module you ...   
1                               {"ImportId":"QID19"}   
2                                                NaN   
3                          Designing Local Curricula   

                                Q20  \
0  How are you using this resource?   
1         {"ImportId":"QID20_TEXT"}   
2                               NaN   
3     Collecting district feedback    

                                                 Q21  \
0  What was the most beneficial/valuable aspect o...   
1                           {"ImportId":"QID5_TEXT"}   
2                                                NaN   
3                                       Global view    

                                                 Q26  \
0  What recommendations do you have for improving...   
1                          {"ImportId":"QID26_TEXT"}   
2                                                NaN   
3                           Differentiated for staff   

                                                 Q37  \
0  What recommendations do you have for making th...   
1                          {"ImportId":"QID37_TEXT"}   
2                                                NaN   
3                                                NaN   

                                                  Q8  
0  Which of the following best describe(s) how yo...  
1                                {"ImportId":"QID8"}  
2                                                NaN  
3             With Colleagues: Discussion with a PLC  

Column names:
Index(['RecordedDate', 'ResponseId', 'Role', 'Q14', 'Q16', 'Resource',
       'Resource_8_TEXT', 'Resource_9_TEXT', 'Resource_10_TEXT', 'Resource.1',
       'Resource_10_TEXT.1', 'Q16.1', 'Q16_9_TEXT', 'Q19', 'Q20', 'Q21', 'Q26',
       'Q37', 'Q8'],
      dtype='object')</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_1939/2926459993.py:5: DtypeWarning: Columns (18) have mixed types. Specify dtype option on import or set low_memory=False.
  opd_survey = pd.read_csv(csv_file_path)</code></pre>
</div>
</div>
</section>
<section id="b.-writing-to-text-files" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="b.-writing-to-text-files"><span class="header-section-number">3.2</span> <strong>2b. Writing to Text Files</strong></h3>
<p>To write text to a file, use the <code>open()</code> function with the appropriate mode (‘w’ for write, ‘a’ for append) and then write the content using methods like <code>write()</code>.</p>
<div id="fff15d9f" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'data/output.txt'</span>, <span class="st">'w'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">file</span>.write(<span class="st">'This is a sample text.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="e5d8b096" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>opd_survey.to_csv(<span class="st">"data/opd_survey_copy.csv"</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"DataFrame has been written to opd_survey_copy.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>DataFrame has been written to opd_survey_copy.csv</code></pre>
</div>
</div>
</section>
<section id="c.-subset-columns" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="c.-subset-columns"><span class="header-section-number">3.3</span> 2c. Subset Columns</h3>
<p>To begin, let’s select Role, Resources (named as Resource…6 in the data frame), and Q21 columns and store as new data frame since those respectively pertain to educator role, OPD resource they are evaluating, and, as illustrated by the second row,</p>
<div id="32673ffb" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset the DataFrame to select specific columns</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>selected_columns <span class="op">=</span> [<span class="st">'Role'</span>, <span class="st">'Resource'</span>, <span class="st">'Q21'</span>]</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>opd_survey <span class="op">=</span> opd_survey[selected_columns]</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the subsetted DataFrame</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(opd_survey.head())</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a copy of the DataFrame</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>opd_selected <span class="op">=</span> opd_survey.copy()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                Role  \
0  What is your role within your school district ...   
1                                {"ImportId":"QID2"}   
2  Central Office Staff (e.g. Superintendents, Te...   
3  Central Office Staff (e.g. Superintendents, Te...   
4  School Support Staff (e.g. Counselors, Technol...   

                                            Resource  \
0  Please indicate the online professional develo...   
1                                {"ImportId":"QID3"}   
2     Summer Institute/RESA PowerPoint Presentations   
3  Online Learning Module (e.g. Call for Change, ...   
4  Online Learning Module (e.g. Call for Change, ...   

                                                 Q21  
0  What was the most beneficial/valuable aspect o...  
1                           {"ImportId":"QID5_TEXT"}  
2                                                NaN  
3                                       Global view   
4                                                NaN  </code></pre>
</div>
</div>
</section>
<section id="d.-rename-columns" class="level3" data-number="3.4">
<h3 data-number="3.4" class="anchored" data-anchor-id="d.-rename-columns"><span class="header-section-number">3.4</span> 2d. Rename Columns</h3>
<p>Notice that Q21 is not a terribly informative variable name. Let’s now take our <code>opd_selected</code> data frame and use the <code>rename()</code> function to change the name from Q21 to “text” and save it as <code>opd_renamed</code>.</p>
<div id="1d7ed7e2" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename the 'Q21' column to 'text'</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>opd_selected.rename(columns<span class="op">=</span>{<span class="st">'Q21'</span>: <span class="st">'text'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>opd_renamed <span class="op">=</span> opd_selected.copy()</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the DataFrame with the renamed column</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(opd_renamed.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                Role  \
0  What is your role within your school district ...   
1                                {"ImportId":"QID2"}   
2  Central Office Staff (e.g. Superintendents, Te...   
3  Central Office Staff (e.g. Superintendents, Te...   
4  School Support Staff (e.g. Counselors, Technol...   

                                            Resource  \
0  Please indicate the online professional develo...   
1                                {"ImportId":"QID3"}   
2     Summer Institute/RESA PowerPoint Presentations   
3  Online Learning Module (e.g. Call for Change, ...   
4  Online Learning Module (e.g. Call for Change, ...   

                                                text  
0  What was the most beneficial/valuable aspect o...  
1                           {"ImportId":"QID5_TEXT"}  
2                                                NaN  
3                                       Global view   
4                                                NaN  </code></pre>
</div>
</div>
<p>This code will rename the ‘Q21’ column to ‘text’ in the DataFrame. The <code>inplace=True</code> parameter ensures that the modification is done on the original DataFrame without the need to assign it back to a variable.</p>
<p>After running this code, you will see the updated DataFrame with the column name changed to ‘text’.</p>
</section>
<section id="e.-subset-rows" class="level3" data-number="3.5">
<h3 data-number="3.5" class="anchored" data-anchor-id="e.-subset-rows"><span class="header-section-number">3.5</span> 2e. Subset Rows</h3>
<p>Now let’s deal with the legacy rows that Qualtrics outputs by default, which are effectively 3 sets of headers. The <code>opd_renamed.iloc[2:]</code> line is used to select all rows starting from the third row (index 2) onward, effectively removing the first two rows from the DataFrame.</p>
<div id="25b46554" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the first two rows from the opd_renamed DataFrame</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>opd_sliced <span class="op">=</span> opd_renamed.iloc[<span class="dv">2</span>:].copy()</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the DataFrame with the renamed column and without the first two rows</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(opd_sliced.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                Role  \
2  Central Office Staff (e.g. Superintendents, Te...   
3  Central Office Staff (e.g. Superintendents, Te...   
4  School Support Staff (e.g. Counselors, Technol...   
5  School Support Staff (e.g. Counselors, Technol...   
6                                            Teacher   

                                            Resource  \
2     Summer Institute/RESA PowerPoint Presentations   
3  Online Learning Module (e.g. Call for Change, ...   
4  Online Learning Module (e.g. Call for Change, ...   
5                                           Calendar   
6                                       Live Webinar   

                                      text  
2                                      NaN  
3                             Global view   
4                                      NaN  
5                            communication  
6  levels ofquestioning and revised blooms  </code></pre>
</div>
</div>
<p>Now let’s take our <code>opd_sliced</code> and remove any rows that are missing data, as indicated by an <code>NA</code>.</p>
<div id="fdddb2c6" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove rows with missing data from the copied DataFrame</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>opd_sliced.dropna(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the DataFrame with the renamed column and without rows with missing data</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(opd_sliced.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                Role  \
3  Central Office Staff (e.g. Superintendents, Te...   
5  School Support Staff (e.g. Counselors, Technol...   
6                                            Teacher   
7                                            Teacher   
8  School Support Staff (e.g. Counselors, Technol...   

                                            Resource  \
3  Online Learning Module (e.g. Call for Change, ...   
5                                           Calendar   
6                                       Live Webinar   
7  Online Learning Module (e.g. Call for Change, ...   
8                                       Live Webinar   

                                      text  
3                             Global view   
5                            communication  
6  levels ofquestioning and revised blooms  
7                            None, really.  
8                                awareness  </code></pre>
</div>
</div>
<p>The <code>opd_sliced.dropna(inplace=True)</code> line removes any row containing at least one NaN value in any column. The <code>inplace=True</code> parameter modifies the DataFrame in place, without the need to assign it back to a variable.</p>
<p>This will give you a DataFrame (<code>opd_sliced</code>) without any rows that have missing data.</p>
<div id="a334f894" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>opd_complete <span class="op">=</span> opd_sliced.copy()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, since we are only interested in the feedback from teachers, let’s also filter our dataset for only participants who indicated their <code>Role</code> as “Teacher”.</p>
<p>To filter the DataFrame <code>opd_complete</code> for rows where the ‘Role’ column is equal to “Teacher,” you can use boolean indexing. Here’s how you can achieve that:</p>
<div id="d56ba757" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter the DataFrame for rows where 'Role' is equal to "Teacher"</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>opd_teacher <span class="op">=</span> opd_complete[opd_complete[<span class="st">'Role'</span>] <span class="op">==</span> <span class="st">'Teacher'</span>]</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the filtered DataFrame</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(opd_teacher.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Role                                           Resource  \
6   Teacher                                       Live Webinar   
7   Teacher  Online Learning Module (e.g. Call for Change, ...   
11  Teacher  Online Learning Module (e.g. Call for Change, ...   
13  Teacher  Online Learning Module (e.g. Call for Change, ...   
18  Teacher  Online Learning Module (e.g. Call for Change, ...   

                                                 text  
6             levels ofquestioning and revised blooms  
7                                       None, really.  
11  In any of the modules when a teacher is shown ...  
13                           Understanding the change  
18                    overview of reasons for change   </code></pre>
</div>
</div>
<p>That was a lot of code we just wrote to end up with <code>opd_teacher</code>. Let’s review:</p>
<div id="747e8856" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset the DataFrame to select specific columns</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>selected_columns <span class="op">=</span> [<span class="st">'Role'</span>, <span class="st">'Resource'</span>, <span class="st">'Q21'</span>]</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>opd_survey <span class="op">=</span> opd_survey[selected_columns]</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a copy of the DataFrame</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>opd_selected <span class="op">=</span> opd_survey.copy()</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename the 'Q21' column to 'text'</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>opd_selected.rename(columns<span class="op">=</span>{<span class="st">'Q21'</span>: <span class="st">'text'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>opd_renamed <span class="op">=</span> opd_selected.copy()</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the first two rows from the opd_renamed DataFrame</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>opd_sliced <span class="op">=</span> opd_renamed.iloc[<span class="dv">2</span>:].copy()</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove rows with missing data from the copied DataFrame</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>opd_sliced.dropna(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>opd_complete <span class="op">=</span> opd_sliced.copy()</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter the DataFrame for rows where 'Role' is equal to "Teacher"</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>opd_teacher <span class="op">=</span> opd_complete[opd_complete[<span class="st">'Role'</span>] <span class="op">==</span> <span class="st">'Teacher'</span>].copy()</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the filtered DataFrame</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(opd_teacher.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Role                                           Resource  \
6   Teacher                                       Live Webinar   
7   Teacher  Online Learning Module (e.g. Call for Change, ...   
11  Teacher  Online Learning Module (e.g. Call for Change, ...   
13  Teacher  Online Learning Module (e.g. Call for Change, ...   
18  Teacher  Online Learning Module (e.g. Call for Change, ...   

                                                 text  
6             levels ofquestioning and revised blooms  
7                                       None, really.  
11  In any of the modules when a teacher is shown ...  
13                           Understanding the change  
18                    overview of reasons for change   </code></pre>
</div>
</div>
</section>
<section id="f.-tokenization" class="level3" data-number="3.6">
<h3 data-number="3.6" class="anchored" data-anchor-id="f.-tokenization"><span class="header-section-number">3.6</span> <strong>2f. Tokenization</strong></h3>
<p>Tokenization involves breaking text into individual units, such as words or sentences. The <code>nltk</code> library provides powerful tools for tokenization.</p>
<div id="e26d79b1" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.tokenize <span class="im">import</span> word_tokenize</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Download the NLTK data for tokenization</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>nltk.download(<span class="st">'punkt'</span>)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">'Tokenization is essential for natural language processing.'</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>tokens <span class="op">=</span> word_tokenize(text)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tokens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Tokenization', 'is', 'essential', 'for', 'natural', 'language', 'processing', '.']</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>[nltk_data] Downloading package punkt to /home/r1592218/nltk_data...
[nltk_data]   Package punkt is already up-to-date!</code></pre>
</div>
</div>
<section id="tokenize-text" class="level4" data-number="3.6.1">
<h4 data-number="3.6.1" class="anchored" data-anchor-id="tokenize-text"><span class="header-section-number">3.6.1</span> Tokenize Text</h4>
<p>In order to tidy our text, we need to break the text into individual tokens (a process called tokenization) and transform it to a tidy data structure.</p>
<p>After all the work we did prepping our data, this is going to feel a little anticlimactic.</p>
<p>Let’s go ahead and tidy our text and save it as <code>opd_tidy</code>:</p>
<div id="3d219946" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#from nltk.tokenize import word_tokenize</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.tokenize <span class="im">import</span> RegexpTokenizer</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Tokenize the 'text' column and create a new column 'word'</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Use RegexpTokenizer to remove punctuation and convert to lowercase</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>tokenizer <span class="op">=</span> RegexpTokenizer(<span class="vs">r'\w+'</span>)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co">#opd_teacher['word'] = opd_teacher['text'].apply(lambda x: word_tokenize(str(x)))</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>opd_teacher[<span class="st">'word'</span>] <span class="op">=</span> opd_teacher[<span class="st">'text'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: [token.lower() <span class="cf">for</span> token <span class="kw">in</span> tokenizer.tokenize(<span class="bu">str</span>(x))])</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Explode the 'word' column to transform each row into individual words</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>opd_tidy <span class="op">=</span> opd_teacher.explode(<span class="st">'word'</span>)</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop the original 'text' column</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>opd_tidy.drop(columns<span class="op">=</span>[<span class="st">'text'</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the DataFrame with each row representing individual words, without punctuation, and in lowercase</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(opd_tidy.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Role      Resource           word
6  Teacher  Live Webinar         levels
6  Teacher  Live Webinar  ofquestioning
6  Teacher  Live Webinar            and
6  Teacher  Live Webinar        revised
6  Teacher  Live Webinar         blooms</code></pre>
</div>
</div>
<p>This code uses the <code>explode</code> function to transform the ‘word’ column into individual rows while maintaining the index values. The original ‘text’ column is then dropped from the resulting DataFrame.</p>
<p>You can use the <code>nltk</code> library for further processing the ‘word’ column to remove punctuation and convert tokens to lowercase. The <code>nltk</code> library provides a convenient method called <code>RegexpTokenizer</code> for this purpose.</p>
<p>In this code, the RegexpTokenizer is used to remove punctuation, and a list comprehension is used to convert the tokens to lowercase.</p>
</section>
<section id="remove-stop-words" class="level4" data-number="3.6.2">
<h4 data-number="3.6.2" class="anchored" data-anchor-id="remove-stop-words"><span class="header-section-number">3.6.2</span> Remove Stop Words</h4>
<p>One final step in tidying our text is to remove words that don’t add much value to our analysis (at least when using this approach) such as “and”, “the”, “of”, “to” etc. The <code>nltk</code> library provides a list of common stop words. .</p>
<p>Let’s take a look at these common stop words so we know what we’re getting rid of from our <code>opd_tidy</code> dataset.</p>
<div id="b4091368" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.corpus <span class="im">import</span> stopwords</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Download the NLTK data for stop words</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>nltk.download(<span class="st">'stopwords'</span>)</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Get a list of English stop words</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>stop_words <span class="op">=</span> <span class="bu">set</span>(stopwords.words(<span class="st">'english'</span>))</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the stop words being removed</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Stop words being removed:"</span>, stop_words)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Stop words being removed: {'didn', "won't", 'she', 'when', "she's", 'to', 'don', "mustn't", 'hers', 'all', 'between', 'this', 'his', 'or', 'haven', "haven't", "couldn't", 'needn', 'before', 'there', 'own', 'mustn', 'these', 'isn', 'they', 'theirs', 'such', 'y', 'against', 'most', "should've", 'you', 'as', 'being', 'how', 'is', 've', 'about', 'at', 'whom', "wasn't", 'until', 'over', 'their', 'nor', "mightn't", 'no', "hadn't", 'above', "it's", 'just', 'himself', 'yourself', 'a', 'than', 'll', 'him', 'up', 'down', "hasn't", 'which', 'shan', 'of', 'on', 'me', 'yourselves', 'into', 'was', 'in', 'while', 'few', 'its', 'themselves', 'where', 'couldn', 'been', 'after', 'can', 'mightn', "didn't", 'more', 'same', "don't", 'has', 'the', 'for', 'but', "wouldn't", 'does', 'then', 'am', "you're", 'i', "you'd", 'who', "shan't", 'ours', "shouldn't", "weren't", 'now', 'other', "aren't", 'should', 'were', 'again', 'doesn', 'that', 'those', "you've", 'here', 'why', 't', 'them', 'each', 'ain', 'wouldn', 'ma', 'hadn', 'an', "needn't", 'yours', 'herself', 'off', 'out', 'with', 'and', 'from', 'shouldn', 'only', 'through', "you'll", 'he', 'are', 'doing', 'aren', 'did', 'hasn', 'very', 'not', 'because', 'won', 'once', 'further', 'by', 'her', 'we', 'be', 'so', "doesn't", 'itself', 'd', 'ourselves', 'have', 'some', 'our', 'any', 'm', 'o', 'both', 'it', 'your', 'will', "that'll", 's', 'wasn', 'if', 'during', 'do', 'had', 'weren', 'below', 'my', 'under', 'myself', 'too', "isn't", 're', 'what', 'having'}</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>[nltk_data] Downloading package stopwords to
[nltk_data]     /home/r1592218/nltk_data...
[nltk_data]   Package stopwords is already up-to-date!</code></pre>
</div>
</div>
<p>Let’s remove rows from our <code>opd_tidy</code> data frame that contain matches in the <code>word</code> column with those in the <code>stop_words</code> dataset and save it as <code>opd_clean</code> since we were done cleaning our data at this point.</p>
<div id="df0efb94" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove stop words from the 'word' column</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>opd_teacher[<span class="st">'word'</span>] <span class="op">=</span> opd_teacher[<span class="st">'word'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: [token <span class="cf">for</span> token <span class="kw">in</span> x <span class="cf">if</span> token <span class="kw">not</span> <span class="kw">in</span> stop_words])</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Explode the 'word' column to transform each row into individual words</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>opd_tidy <span class="op">=</span> opd_teacher.explode(<span class="st">'word'</span>)</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop the original 'text' column</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>opd_tidy.drop(columns<span class="op">=</span>[<span class="st">'text'</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the DataFrame with each row representing individual words, without punctuation, lowercase, and without stop words</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(opd_tidy.head())</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>opd_clean <span class="op">=</span> opd_tidy.copy()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Role                                           Resource           word
6  Teacher                                       Live Webinar         levels
6  Teacher                                       Live Webinar  ofquestioning
6  Teacher                                       Live Webinar        revised
6  Teacher                                       Live Webinar         blooms
7  Teacher  Online Learning Module (e.g. Call for Change, ...           none</code></pre>
</div>
</div>
<p>This code uses the <strong><code>stopwords.words('english')</code></strong> to get a list of English stop words and then removes these stop words from the ‘word’ column.</p>
</section>
<section id="comprehension-check" class="level4" data-number="3.6.3">
<h4 data-number="3.6.3" class="anchored" data-anchor-id="comprehension-check"><span class="header-section-number">3.6.3</span> Comprehension Check</h4>
<ol type="1">
<li>Tidy your opd_benefits data by tokenizing your text and removing stop words.</li>
<li>How would you change the code in the Subset Columns section if you wanted to analyze how educators are are using the online resources instead of the most beneficial aspects?</li>
<li>How would you rewrite the code in the Subset Rows section if you were interested in looking at School Executive responses instead of teachers?</li>
<li>Rewrite the piped code in the Code Reduction section to prepare a data frame for tidying that includes all Roles, not just teachers, but excludes the Resource column. Assign it to <code>opd_benefits</code> for later use.</li>
</ol>
</section>
</section>
</section>
<section id="explore" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="explore"><span class="header-section-number">4</span> 3. EXPLORE</h2>
<p>As highlighted in both DSEIUR and Learning Analytics Goes to School, calculating summary statistics, data visualization, and feature engineering (the process of creating new variables from a dataset) are a key part of exploratory data analysis. One goal in this phase is explore questions that drove the original analysis and develop new questions and hypotheses to test in later stages. In Section 6, we will calculate some very basic summary statistics from our tidied text, explore key words of interest to gather additional context, and use data visualization to identify patterns and trends that may not be obvious from our tables and numerical summaries. Topics addressed in Section 6 include:</p>
<ul>
<li><strong>Summary Stats</strong>. We focus primarily on the use of word counts and calculating proportions to help us identify common words used to describe the most valuable aspects of online professional development offerings.</li>
<li><strong>Word Search</strong>. We learn about the global regular expression parser to search for key words among our data set.</li>
<li><strong>Data Visualization</strong>. Finally, we wrap up this walkthrough by creating wordclouds, bar plots, and small multiple charts to explore patterns and trends that would be difficult to distinguish otherwise.</li>
</ul>
<section id="a.-summary-stats" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="a.-summary-stats"><span class="header-section-number">4.1</span> 3a. Summary Stats</h3>
<p>Prior to making any data visualization, we revisit our or overarching question guiding most of our efforts in this lab, “How do we <strong>quantify</strong> what a text is about?”</p>
<section id="word-counts" class="level4" data-number="4.1.1">
<h4 data-number="4.1.1" class="anchored" data-anchor-id="word-counts"><span class="header-section-number">4.1.1</span> Word Counts</h4>
<p>As highlighted in <a href="https://tedunderwood.com/2013/02/20/wordcounts-are-amazing/">Word Counts are Amazing</a>, one simple but powerful approach to text analysis is counting the frequency in which words occur in a given collection of documents, or corpus.</p>
<p>Now that we have our original survey data in a tidy text format, we can use the <code>count()</code> function from the <code>pandas</code> package to find the most common words used by teachers when asked, “What was the most beneficial/valuable aspect of this online resource?”</p>
<p>Let’s print out the word count of the top 10 words after preprocessing the text, using the <code>value_counts</code> method in pandas. Here’s the code to achieve that:</p>
<div id="617e66dd" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the occurrences of each word across all the resources</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>words_count <span class="op">=</span> opd_clean[<span class="st">'word'</span>].value_counts().reset_index()</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>words_count.columns <span class="op">=</span> [<span class="st">'word'</span>, <span class="st">'count'</span>]</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the word count of the top 10 words</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Top 10 words and their counts:"</span>)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(words_count.head(<span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Top 10 words and their counts:
            word  count
0    information   1885
1       learning   1520
2         videos   1385
3            use   1327
4      resources   1286
5           able   1186
6         online   1139
7       examples   1105
8  understanding   1092
9           time   1083</code></pre>
</div>
</div>
<p>This code uses the <code>value_counts</code> method on the ‘word’ column to count the occurrences of each word and then prints the top 10 words and their counts.</p>
<p>Going back to findings from the original report, a strategy as simple basic word counts resulted in key words consistent with findings from the qualitative analysis of focus-group transcripts and open-ended survey responses:</p>
<blockquote class="blockquote">
<p>Educators frequently cited that the <strong>information and resources</strong> provided through the modules improved their understanding of the new standards and the teacher evaluation process.</p>
</blockquote>
<p>See also this finding around video clips:</p>
<blockquote class="blockquote">
<p>Webinar participants appreciated the useful, updated information presented through a combination of PowerPoint slides and <strong>video clips</strong>.</p>
</blockquote>
<p>One notable distinction between word counts and more traditional qualitative analysis is that broader themes like “convenience” often are not immediately apparent in words counts, but rather emerges from responses containing words like “pace”, “format”, “online”, “ease”, and “access”.</p>
<blockquote class="blockquote">
<p>A common theme from focus groups and open-ended survey responses was the <strong>convenience</strong> of online professional development. One teacher in a focus group stated, “I liked the format. And the way that it was given, it was at your own pace, which works well for our schedules…”</p>
</blockquote>
<p>To show the word count of the ‘word’ column based on each ‘Resource’ column, you can group the DataFrame by the ‘Resource’ column and then apply the <code>value_counts</code> function. Here’s the code for that:</p>
<div id="8b3266d8" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by 'Resource' and count the occurrences of each word</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>resource_word_counts <span class="op">=</span> opd_clean.groupby([<span class="st">'Resource'</span>, <span class="st">'word'</span>]).size().reset_index(name<span class="op">=</span><span class="st">'word_count'</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the word count based on each 'Resource' column</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(resource_word_counts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Resource         word  word_count
0     Calendar         able           2
1     Calendar      acessed           1
2     Calendar  achievement           1
3     Calendar          add           1
4     Calendar      already           1
...        ...          ...         ...
8044      Wiki         work           1
8045      Wiki       worked           1
8046      Wiki      working           2
8047      Wiki    workshops           2
8048      Wiki      writing           1

[8049 rows x 3 columns]</code></pre>
</div>
</div>
<p>This code uses <code>groupby</code> on both ‘Resource’ and ‘word’ columns and then applies the <code>size</code> function to count the occurrences of each word within each ‘Resource’ group. The result is a DataFrame with columns ‘Resource’, ‘word’, and ‘word_count’, representing the word count sorted by different ‘Resource’.</p>
</section>
<section id="word-frequencies" class="level4" data-number="4.1.2">
<h4 data-number="4.1.2" class="anchored" data-anchor-id="word-frequencies"><span class="header-section-number">4.1.2</span> Word Frequencies</h4>
<p>One common approach to facilitate comparison across documents or groups of text, in our case responses by Online Resource type, is by looking at the frequency that each word occurs among all words for that document group. This also helps to better gauge how prominent the same word is across different groups.</p>
<p>To show the proportion of each word group by resource, you can calculate the proportion by dividing the word count by the total number of words in each resource group:</p>
<div id="f3495fa1" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by 'Resource' and count the occurrences of each word</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>resource_word_counts <span class="op">=</span> opd_clean.groupby([<span class="st">'Resource'</span>, <span class="st">'word'</span>]).size().reset_index(name<span class="op">=</span><span class="st">'word_count'</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the total number of words in each resource group</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>total_words_per_resource <span class="op">=</span> opd_clean.groupby(<span class="st">'Resource'</span>)[<span class="st">'word'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">len</span>(x)).reset_index(name<span class="op">=</span><span class="st">'total_words'</span>)</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge the word counts and total words per resource</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>resource_word_counts <span class="op">=</span> pd.merge(resource_word_counts, total_words_per_resource, on<span class="op">=</span><span class="st">'Resource'</span>)</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the proportion of each word</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>resource_word_counts[<span class="st">'proportion'</span>] <span class="op">=</span> resource_word_counts[<span class="st">'word_count'</span>] <span class="op">/</span> resource_word_counts[<span class="st">'total_words'</span>]</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the result</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(resource_word_counts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Resource         word  word_count  total_words  proportion
0     Calendar         able           2           69    0.028986
1     Calendar      acessed           1           69    0.014493
2     Calendar  achievement           1           69    0.014493
3     Calendar          add           1           69    0.014493
4     Calendar      already           1           69    0.014493
...        ...          ...         ...          ...         ...
8044      Wiki         work           1          547    0.001828
8045      Wiki       worked           1          547    0.001828
8046      Wiki      working           2          547    0.003656
8047      Wiki    workshops           2          547    0.003656
8048      Wiki      writing           1          547    0.001828

[8049 rows x 5 columns]</code></pre>
</div>
</div>
</section>
<section id="term-frequency-inverse-document-frequency" class="level4" data-number="4.1.3">
<h4 data-number="4.1.3" class="anchored" data-anchor-id="term-frequency-inverse-document-frequency"><span class="header-section-number">4.1.3</span> Term Frequency-Inverse Document Frequency</h4>
<p>Term frequency-inverse document frequency (tf-idf) is an approach that takes this approach one step further.</p>
<p>As noted in <a href="https://www.tidytextmining.com/tfidf.html">Tidy Text Mining with R</a>:</p>
<blockquote class="blockquote">
<p>The statistic tf-idf is intended to measure how important a word is to a document in a collection (or corpus) of documents, for example, to one novel in a collection of novels or to one website in a collection of websites.</p>
</blockquote>
<p>Silge and Robinson note that, “The idea of tf-idf is to find the important words for the content of each document by decreasing the weight for commonly used words and increasing the weight for words that are not used very much in a collection or corpus of document… That is, tf-idf attempts to find the words that are important (i.e., common) in a text, but not too common.”</p>
<p>To calculate the tf-idf statistics, the <code>TfidfVectorizer()</code> within the <code>sklearn.feature_extraction</code> module from the <code>scikit-learn</code> library will be used.</p>
<ul>
<li><p><a href="https://scikit-learn.org/stable/"><code>scikit-learn</code></a>: an open-source Python library that implements a range of machine learning, pre-processing, cross-validation, and visualization algorithms using a unified interface. It is an open-source machine-learning library that provides a plethora of tools for various machine-learning tasks such as Classification, Regression, Clustering, and many more.</p></li>
<li><p><a href="https://scikit-learn.org/stable/api/sklearn.feature_extraction.html#module-sklearn.feature_extraction"><code>sklearn.feature_extraction</code></a>: a module that can be used to extract features in a format supported by machine learning algorithms from datasets consisting of formats such as text and image.</p></li>
<li><p><a href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.TfidfVectorizer.html"><code>TfidfVectorizer()</code></a>: itcan directly convert a collection of raw documents to a matrix of TF-IDF features.</p></li>
</ul>
<div id="89af881e" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install scikit<span class="op">-</span>learn</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> TfidfVectorizer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: scikit-learn in /cloud/project/r-reticulate/lib/python3.11/site-packages (1.5.0)
Requirement already satisfied: numpy&gt;=1.19.5 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from scikit-learn) (1.26.4)
Requirement already satisfied: scipy&gt;=1.6.0 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from scikit-learn) (1.12.0)
Requirement already satisfied: joblib&gt;=1.2.0 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from scikit-learn) (1.4.2)
Requirement already satisfied: threadpoolctl&gt;=3.1.0 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from scikit-learn) (3.5.0)

[notice] A new release of pip is available: 24.0 -&gt; 24.1.2
[notice] To update, run: pip install --upgrade pip</code></pre>
</div>
</div>
<p>Because tf-idf can account through weighting for “too common” words like “and” or “but”, when calculating tf-idf it is not necessary to remove stop words. So in this case, we will use original text in <code>opd_teacher</code>.</p>
<p>Now, we’re ready to use the <code>TfidfVectorizer()</code> function to calculate a tf-idf statistic for each word and assess it’s relative importance to a given online resource type:</p>
<div id="4bfd4b5e" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize the TF-IDF Vectorizer</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>vectorizer <span class="op">=</span> TfidfVectorizer()</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit and transform the text data</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>tfidf_matrix <span class="op">=</span> vectorizer.fit_transform(opd_teacher[<span class="st">'text'</span>])</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the TF-IDF matrix to a DataFrame</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>tfidf_df <span class="op">=</span> pd.DataFrame(tfidf_matrix.toarray(), index<span class="op">=</span>opd_teacher[<span class="st">'text'</span>], columns<span class="op">=</span>vectorizer.get_feature_names_out())</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the TF-IDF DataFrame</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tfidf_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                     0f   10  100  1013   12  \
text                                                                           
levels ofquestioning and revised blooms             0.0  0.0  0.0   0.0  0.0   
None, really.                                       0.0  0.0  0.0   0.0  0.0   
In any of the modules when a teacher is shown i...  0.0  0.0  0.0   0.0  0.0   
Understanding the change                            0.0  0.0  0.0   0.0  0.0   
overview of reasons for change                      0.0  0.0  0.0   0.0  0.0   
...                                                 ...  ...  ...   ...  ...   
I enjoyed the KWL and the way that the chart wa...  0.0  0.0  0.0   0.0  0.0   
I can complete this on my own time.                 0.0  0.0  0.0   0.0  0.0   
To find out the available resources and how to ...  0.0  0.0  0.0   0.0  0.0   
accessibility online                                0.0  0.0  0.0   0.0  0.0   
The information and the interesting format          0.0  0.0  0.0   0.0  0.0   

                                                     13   14  146   17   19  \
text                                                                          
levels ofquestioning and revised blooms             0.0  0.0  0.0  0.0  0.0   
None, really.                                       0.0  0.0  0.0  0.0  0.0   
In any of the modules when a teacher is shown i...  0.0  0.0  0.0  0.0  0.0   
Understanding the change                            0.0  0.0  0.0  0.0  0.0   
overview of reasons for change                      0.0  0.0  0.0  0.0  0.0   
...                                                 ...  ...  ...  ...  ...   
I enjoyed the KWL and the way that the chart wa...  0.0  0.0  0.0  0.0  0.0   
I can complete this on my own time.                 0.0  0.0  0.0  0.0  0.0   
To find out the available resources and how to ...  0.0  0.0  0.0  0.0  0.0   
accessibility online                                0.0  0.0  0.0  0.0  0.0   
The information and the interesting format          0.0  0.0  0.0  0.0  0.0   

                                                    ...  your  yourself  \
text                                                ...                   
levels ofquestioning and revised blooms             ...   0.0       0.0   
None, really.                                       ...   0.0       0.0   
In any of the modules when a teacher is shown i...  ...   0.0       0.0   
Understanding the change                            ...   0.0       0.0   
overview of reasons for change                      ...   0.0       0.0   
...                                                 ...   ...       ...   
I enjoyed the KWL and the way that the chart wa...  ...   0.0       0.0   
I can complete this on my own time.                 ...   0.0       0.0   
To find out the available resources and how to ...  ...   0.0       0.0   
accessibility online                                ...   0.0       0.0   
The information and the interesting format          ...   0.0       0.0   

                                                    youth  ype  yrs  ywa  yyy  \
text                                                                            
levels ofquestioning and revised blooms               0.0  0.0  0.0  0.0  0.0   
None, really.                                         0.0  0.0  0.0  0.0  0.0   
In any of the modules when a teacher is shown i...    0.0  0.0  0.0  0.0  0.0   
Understanding the change                              0.0  0.0  0.0  0.0  0.0   
overview of reasons for change                        0.0  0.0  0.0  0.0  0.0   
...                                                   ...  ...  ...  ...  ...   
I enjoyed the KWL and the way that the chart wa...    0.0  0.0  0.0  0.0  0.0   
I can complete this on my own time.                   0.0  0.0  0.0  0.0  0.0   
To find out the available resources and how to ...    0.0  0.0  0.0  0.0  0.0   
accessibility online                                  0.0  0.0  0.0  0.0  0.0   
The information and the interesting format            0.0  0.0  0.0  0.0  0.0   

                                                    yyyyyyy  zero  zone  
text                                                                     
levels ofquestioning and revised blooms                 0.0   0.0   0.0  
None, really.                                           0.0   0.0   0.0  
In any of the modules when a teacher is shown i...      0.0   0.0   0.0  
Understanding the change                                0.0   0.0   0.0  
overview of reasons for change                          0.0   0.0   0.0  
...                                                     ...   ...   ...  
I enjoyed the KWL and the way that the chart wa...      0.0   0.0   0.0  
I can complete this on my own time.                     0.0   0.0   0.0  
To find out the available resources and how to ...      0.0   0.0   0.0  
accessibility online                                    0.0   0.0   0.0  
The information and the interesting format              0.0   0.0   0.0  

[23004 rows x 5770 columns]</code></pre>
</div>
</div>
<p>To make the TF-IDF DataFrame easy to read, let’s display the individual words in rows rather than in columns (the below code block will run a while, the output would be like below figure):</p>
<div id="c76b1096" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Reshape the DataFrame for visualization using pd.melt</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co">#tfidf_df = pd.melt(tfidf_df, id_vars=['text'], var_name='word', value_name='tf-idf')</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co">#print(tfidf_df)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="img/tf-idf.png" class="img-fluid"></p>
</section>
<section id="comprehension-questions" class="level4" data-number="4.1.4">
<h4 data-number="4.1.4" class="anchored" data-anchor-id="comprehension-questions"><span class="header-section-number">4.1.4</span> Comprehension Questions</h4>
<ol type="1">
<li>Looking back at the Word Counts section, what other aspects of the online professional development resources to our word counts suggest teachers find valuable or beneficial?</li>
<li>Instead of using the print() function for <code>resource_word_counts</code> and searching in the source how, how might you use the filter function to (refer to 2e when filtering the participants’s <code>Role</code> as “Teacher”) find return the most common words for Recorded Webinars?</li>
<li>How many total resources were actually evaluated and which resource received the most feedback? How do you know?</li>
<li>What are some obvious limitations to tf-idf, at least for this dataset, based on the initial <code>tfidf_df</code> data frame we created?</li>
<li>Calculate word counts, frequencies, and tf-idf for your <code>opd_benefits</code> data frame. For frequencies and tf-idf, group by Role instead of Resource.</li>
<li>What differences, if any, do you notice between teachers and other roles?</li>
</ol>
</section>
</section>
<section id="b.-word-search" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="b.-word-search"><span class="header-section-number">4.2</span> 3b. Word Search</h3>
<p>A quick word count actually resulted in findings fairly consistent with some of the qualitative findings reported, but also lacked some nuance, unsurprisingly, and left some questions about what some of the more frequent words were in reference to.</p>
<p>Let’s use our reduced opd_teacher survey data frame that contains the complete teacher responses and use the handy string filter function to select just our <code>text</code> column and filter out responses that contain key words of interest. For example, what aspects of “online” made it beneficial.</p>
<div id="0bb3ad29" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter rows containing the word 'online' in the 'text' column</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>opd_quotes <span class="op">=</span> opd_teacher[opd_teacher[<span class="st">'text'</span>].<span class="bu">str</span>.contains(<span class="st">'online'</span>)]</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the opd_quotes DataFrame</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(opd_quotes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Role                                           Resource  \
30     Teacher  Online Learning Module (e.g. Call for Change, ...   
249    Teacher  Online Learning Module (e.g. Call for Change, ...   
254    Teacher  Online Learning Module (e.g. Call for Change, ...   
258    Teacher  Online Learning Module (e.g. Call for Change, ...   
266    Teacher  Online Learning Module (e.g. Call for Change, ...   
...        ...                                                ...   
56911  Teacher  Online Learning Module (e.g. Call for Change, ...   
56976  Teacher  Online Learning Module (e.g. Call for Change, ...   
56979  Teacher  Online Learning Module (e.g. Call for Change, ...   
56980  Teacher  Online Learning Module (e.g. Call for Change, ...   
57046  Teacher  Online Learning Module (e.g. Call for Change, ...   

                                                    text  \
30     online--allowed me to do it on my own time and...   
249    an understanding of the development resources ...   
254    The most beneficiatl/valuable aspect of this o...   
258    I liked the online resources and links of help...   
266                     references made available online   
...                                                  ...   
56911  I could go online an working on the module any...   
56976  I learned how to use two programs, Voice Threa...   
56979  I  was  impressed with the focus on helping st...   
56980  I like that it was online and that I could com...   
57046                              accessibility online    

                                                    word  
30                         [online, allowed, time, pace]  
249    [understanding, development, resources, availa...  
254    [beneficiatl, valuable, aspect, online, resour...  
258    [liked, online, resources, links, helpful, web...  
266                [references, made, available, online]  
...                                                  ...  
56911      [could, go, online, working, module, anytime]  
56976  [learned, use, two, programs, voice, thread, p...  
56979  [impressed, focus, helping, students, learn, s...  
56980          [like, online, could, complete, schedule]  
57046                            [accessibility, online]  

[1026 rows x 4 columns]</code></pre>
</div>
</div>
<p>We can view all quotes in the source pane, or use the sample function to select any number of random quotes. In this case 20:</p>
<div id="48178ea9" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Randomly sample 20 rows from the DataFrame</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>sampled_opd_quotes <span class="op">=</span> opd_quotes.sample(n<span class="op">=</span><span class="dv">20</span>, random_state<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the sampled DataFrame</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sampled_opd_quotes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Role                                           Resource  \
44567  Teacher  Online Learning Module (e.g. Call for Change, ...   
27132  Teacher  Online Learning Module (e.g. Call for Change, ...   
27350  Teacher  Online Learning Module (e.g. Call for Change, ...   
17519  Teacher  Online Learning Module (e.g. Call for Change, ...   
52302  Teacher  Online Learning Module (e.g. Call for Change, ...   
52334  Teacher  Online Learning Module (e.g. Call for Change, ...   
41312  Teacher  Online Learning Module (e.g. Call for Change, ...   
1717   Teacher  Online Learning Module (e.g. Call for Change, ...   
29446  Teacher  Online Learning Module (e.g. Call for Change, ...   
50172  Teacher  Online Learning Module (e.g. Call for Change, ...   
52008  Teacher  Online Learning Module (e.g. Call for Change, ...   
54350  Teacher  Online Learning Module (e.g. Call for Change, ...   
9239   Teacher  Online Learning Module (e.g. Call for Change, ...   
38272  Teacher  Online Learning Module (e.g. Call for Change, ...   
29588  Teacher  Online Learning Module (e.g. Call for Change, ...   
29406  Teacher  Online Learning Module (e.g. Call for Change, ...   
2087   Teacher  Online Learning Module (e.g. Call for Change, ...   
43531  Teacher  Online Learning Module (e.g. Call for Change, ...   
16353  Teacher  Recorded Webinar or Presentation (e.g. Strateg...   
20279  Teacher  Online Learning Module (e.g. Call for Change, ...   

                                                    text  \
44567  Answer Garden online resource and the online q...   
27132  The section that discussed evaluation of onlin...   
27350  The most benefical aspect of the this online r...   
17519                                             online   
52302                                  online activities   
52334  This online resource gave clarity as to the pu...   
41312  The most beneficial/valuable aspect of the onl...   
1717   That I could go at my own pace and on my own t...   
29446               The shared lesson plans found online   
50172                     The Videos and online manuals.   
52008  All areas of the online resource was very valu...   
54350  The most valuable aspect of this online resour...   
9239   The history component of the modules have been...   
38272                         available resources online   
29588  I liked the information that was provide about...   
29406  This online module was very useable and pertin...   
2087            Using this online within my school site.   
43531  It was nice that it was online and can be comp...   
16353  Did not complete online, rather it was in a wo...   
20279           The visual online explanation of Blooms    

                                                    word  
44567  [answer, garden, online, resource, online, qui...  
27132  [section, discussed, evaluation, online, resou...  
27350  [benefical, aspect, online, resource, help, st...  
17519                                           [online]  
52302                               [online, activities]  
52334  [online, resource, gave, clarity, purpose, msl...  
41312  [beneficial, valuable, aspect, online, tutoria...  
1717              [could, go, pace, time, since, online]  
29446             [shared, lesson, plans, found, online]  
50172                          [videos, online, manuals]  
52008                [areas, online, resource, valuable]  
54350  [valuable, aspect, online, resource, fact, abl...  
9239   [history, component, modules, helpful, helped,...  
38272                     [available, resources, online]  
29588     [liked, information, provide, online, reading]  
29406  [online, module, useable, pertinent, aspects, ...  
2087               [using, online, within, school, site]  
43531              [nice, online, complete, convenience]  
16353  [complete, online, rather, workshop, beneficia...  
20279              [visual, online, explanation, blooms]  </code></pre>
</div>
</div>
<p>In some cases, we can see that the use of the word “online” was simply repetition of the question prompt, but in other cases we can see that it’s associated with the broader theme of “convenience” as with the quote, “This online resources gave me the opportunity to study on my own time.”</p>
<p>Note that you can also use regular express operators with <code>grep</code> like the <code>*</code> operator to search for word stems. For example using <code>inform*</code> in our search will return quotes with “inform”, “informative”, “information”, etc.</p>
<div id="059e2ebc" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select 'text' column and filter rows containing 'inform*'</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>opd_quotes <span class="op">=</span> opd_teacher[opd_teacher[<span class="st">'text'</span>].<span class="bu">str</span>.contains(<span class="vs">r'\binform\w*'</span>, case<span class="op">=</span><span class="va">False</span>, regex<span class="op">=</span><span class="va">True</span>)][[<span class="st">'text'</span>]]</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Randomly sample 20 rows from the filtered DataFrame</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>sampled_opd_quotes <span class="op">=</span> opd_quotes.sample(n<span class="op">=</span><span class="dv">20</span>, random_state<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the sampled DataFrame</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sampled_opd_quotes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                    text
25229  Having the statistical information and the sig...
33327  Understanding how guided Google searches are a...
49146  Beneficial in that as colleagues we could disc...
18707   I like the many variations of assessments tha...
53064                                        information
51392      To be able to go back and review information.
31166  The information and how it pertains to student...
17162  The information given was valuable.  It was ve...
34890                                        informative
48075  All the information was very relevant and valu...
12131                                   Very informative
38719  the  vokies, examples and questions to analyze...
25113   It as very informative. I enjoyed the activit...
22206  Going back and carefully reading the informati...
27557  content was valuable and the convenience of on...
19045  Learning about the informative portion of asse...
4555       Seeing the videos and hearing the information
21790         Different website to get information from.
21813  Information presented and why it has been reva...
53226              The information on Suicide Prevention</code></pre>
</div>
</div>
</section>
<section id="c.-data-visualization" class="level3" data-number="4.3">
<h3 data-number="4.3" class="anchored" data-anchor-id="c.-data-visualization"><span class="header-section-number">4.3</span> 3c. Data Visualization</h3>
<section id="word-clouds" class="level4" data-number="4.3.1">
<h4 data-number="4.3.1" class="anchored" data-anchor-id="word-clouds"><span class="header-section-number">4.3.1</span> Word Clouds</h4>
<p>The <code>WordCloud</code> library in conjunction with <code>matplotlib.pyplot</code> module is commonly used to generate word clouds due to its versatility and ease of use for displaying images and plots.</p>
<ul>
<li><p><code>WordCloud</code> : generating the word cloud image based on input data. However, it doesn’t have built-in functionality for displaying the word cloud directly.</p></li>
<li><p><a href="https://matplotlib.org"><code>Matplotlib</code></a>: a comprehensive library for creating static, animated, and interactive visualizations in Python.</p></li>
<li><p><a href="https://matplotlib.org/3.5.3/api/_as_gen/matplotlib.pyplot.html"><code>matplotlib.pyplot</code></a> : a module of collection of functions that make <code>matplotlib</code> work like MATLAB. Each <code>pyplot</code> function makes some change to a figure: e.g., creates a figure, creates a plotting area in a figure, plots some lines in a plotting area, decorates the plot with labels, etc.</p></li>
</ul>
<div id="35452c1b" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install wordcloud</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install matplotlib</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> wordcloud</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> wordcloud <span class="im">import</span> WordCloud</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: wordcloud in /cloud/project/r-reticulate/lib/python3.11/site-packages (1.9.3)
Requirement already satisfied: numpy&gt;=1.6.1 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from wordcloud) (1.26.4)
Requirement already satisfied: pillow in /cloud/project/r-reticulate/lib/python3.11/site-packages (from wordcloud) (10.3.0)
Requirement already satisfied: matplotlib in /cloud/project/r-reticulate/lib/python3.11/site-packages (from wordcloud) (3.9.0)
Requirement already satisfied: contourpy&gt;=1.0.1 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib-&gt;wordcloud) (1.2.1)
Requirement already satisfied: cycler&gt;=0.10 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib-&gt;wordcloud) (0.12.1)
Requirement already satisfied: fonttools&gt;=4.22.0 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib-&gt;wordcloud) (4.53.0)
Requirement already satisfied: kiwisolver&gt;=1.3.1 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib-&gt;wordcloud) (1.4.5)
Requirement already satisfied: packaging&gt;=20.0 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib-&gt;wordcloud) (24.0)
Requirement already satisfied: pyparsing&gt;=2.3.1 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib-&gt;wordcloud) (3.1.2)
Requirement already satisfied: python-dateutil&gt;=2.7 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib-&gt;wordcloud) (2.9.0.post0)
Requirement already satisfied: six&gt;=1.5 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from python-dateutil&gt;=2.7-&gt;matplotlib-&gt;wordcloud) (1.16.0)

[notice] A new release of pip is available: 24.0 -&gt; 24.1.2
[notice] To update, run: pip install --upgrade pip
Requirement already satisfied: matplotlib in /cloud/project/r-reticulate/lib/python3.11/site-packages (3.9.0)
Requirement already satisfied: contourpy&gt;=1.0.1 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib) (1.2.1)
Requirement already satisfied: cycler&gt;=0.10 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib) (0.12.1)
Requirement already satisfied: fonttools&gt;=4.22.0 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib) (4.53.0)
Requirement already satisfied: kiwisolver&gt;=1.3.1 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib) (1.4.5)
Requirement already satisfied: numpy&gt;=1.23 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib) (1.26.4)
Requirement already satisfied: packaging&gt;=20.0 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib) (24.0)
Requirement already satisfied: pillow&gt;=8 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib) (10.3.0)
Requirement already satisfied: pyparsing&gt;=2.3.1 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib) (3.1.2)
Requirement already satisfied: python-dateutil&gt;=2.7 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from matplotlib) (2.9.0.post0)
Requirement already satisfied: six&gt;=1.5 in /cloud/project/r-reticulate/lib/python3.11/site-packages (from python-dateutil&gt;=2.7-&gt;matplotlib) (1.16.0)

[notice] A new release of pip is available: 24.0 -&gt; 24.1.2
[notice] To update, run: pip install --upgrade pip</code></pre>
</div>
</div>
<div id="2519e36f" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate a word cloud</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>wordcloud <span class="op">=</span> WordCloud(width<span class="op">=</span><span class="dv">800</span>, height<span class="op">=</span><span class="dv">500</span>, background_color<span class="op">=</span><span class="st">'white'</span>).generate_from_frequencies(<span class="bu">dict</span>(<span class="bu">zip</span>(words_count[<span class="st">'word'</span>], words_count[<span class="st">'count'</span>])))</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the word cloud using matplotlib</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>plt.imshow(wordcloud, interpolation<span class="op">=</span><span class="st">'bilinear'</span>)</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-1-case-study-python_files/figure-html/cell-33-output-1.png" width="611" height="389" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="basic-bar-chart" class="level4" data-number="4.3.2">
<h4 data-number="4.3.2" class="anchored" data-anchor-id="basic-bar-chart"><span class="header-section-number">4.3.2</span> Basic Bar Chart</h4>
<p>The bar chart is the workhorse for data viz and is pretty effective for comparing two or more values. Given the unique aspect of our tidy text data frame, however, we are looking at upwards of over 5,000 values (i.e.&nbsp;words and their counts) to compare with our <code>opd_counts</code> data frame and will need some way to limit the number of words to display.</p>
<div id="85ac5ab3" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter rows with word counts greater than 500</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>opd_filtered <span class="op">=</span> words_count[words_count[<span class="st">'count'</span>] <span class="op">&gt;</span> <span class="dv">500</span>]</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort the DataFrame by 'count' column</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>opd_sorted <span class="op">=</span> opd_filtered.sort_values(by<span class="op">=</span><span class="st">'count'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a bar plot and Display</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>plt.barh(opd_sorted[<span class="st">'word'</span>], opd_sorted[<span class="st">'count'</span>], color<span class="op">=</span><span class="st">'skyblue'</span>)</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Count'</span>)</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Word'</span>)</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Word Counts'</span>)</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>plt.gca().invert_yaxis()  <span class="co"># Invert y-axis to display words in descending order</span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-1-case-study-python_files/figure-html/cell-34-output-1.png" width="887" height="523" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="small-multiples" class="level4" data-number="4.3.3">
<h4 data-number="4.3.3" class="anchored" data-anchor-id="small-multiples"><span class="header-section-number">4.3.3</span> Small Multiples</h4>
<p>Word clouds and bar charts are pretty effective for highlighting the most common words in an entire corpus, or in our case, all teacher survey responses, regardless of resource type being reviewed.</p>
<p>One limitation we ran into earlier when we started looking at word frequencies and tf-idf stats was that it was difficult to easily compare the most common or unique words for each resource type. That is where small multiples come. A small multiple is basically a series of similar graphs or charts using the same scale and axes that make it easier to compare across different document collections of interest, in our case, word counts by resource type.</p>
<p>Let’s create a small multiple by using <code>seaborn</code> library for our <code>resource_word_counts</code> data set instead of the <code>opd_tf_idf</code>.</p>
<ul>
<li><a href="https://seaborn.pydata.org"><code>Seaborn</code></a>: a data visualization library build on built upon <code>matplotlib</code> and integrates closely with <code>pandas</code> data structures. It includes a variety of plotting functions for visualizing univariate and bivariate data, as well as specialized plots for categorical data, timeseries data, and more. It also provides functions for customizing the appearance of plots, such as controlling colors, styles, and axes labels.</li>
</ul>
<div id="a2d4ba3f" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove rows with Resource equal to "Calendar"</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>opd_frequencies_filtered <span class="op">=</span> resource_word_counts[resource_word_counts[<span class="st">'Resource'</span>] <span class="op">!=</span> <span class="st">'Calendar'</span>]</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by Resource and select the top 5 words by proportion</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>top5_words_per_resource <span class="op">=</span> opd_frequencies_filtered.groupby(<span class="st">'Resource'</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.nlargest(<span class="dv">5</span>, <span class="st">'proportion'</span>)).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a catplot - combination of a categorical plot ('word' is a categorical variable) and a FacetGrid ('Resource' is facet)) and map a bar plot to each facet</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>plot <span class="op">=</span> sns.catplot(data<span class="op">=</span>top5_words_per_resource, kind<span class="op">=</span><span class="st">'bar'</span>, x<span class="op">=</span><span class="st">'proportion'</span>, y <span class="op">=</span> <span class="st">'word'</span>, col<span class="op">=</span><span class="st">'Resource'</span>, col_wrap<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Customizing the titles and set font size</span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>plot.set_titles(col_template<span class="op">=</span><span class="st">"</span><span class="sc">{col_name}</span><span class="st">"</span>, size<span class="op">=</span><span class="dv">10</span>) </span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_1939/4129758193.py:7: DeprecationWarning: DataFrameGroupBy.apply operated on the grouping columns. This behavior is deprecated, and in a future version of pandas the grouping columns will be excluded from the operation. Either pass `include_groups=False` to exclude the groupings or explicitly select the grouping columns after groupby to silence this warning.
  top5_words_per_resource = opd_frequencies_filtered.groupby('Resource').apply(lambda x: x.nlargest(5, 'proportion')).reset_index(drop=True)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-1-case-study-python_files/figure-html/cell-35-output-2.png" width="1515" height="1430" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="comprehension-check-1" class="level4" data-number="4.3.4">
<h4 data-number="4.3.4" class="anchored" data-anchor-id="comprehension-check-1"><span class="header-section-number">4.3.4</span> Comprehension Check</h4>
<ol type="1">
<li>Create a word cloud, bar chart, and/or small multiple using your <code>opd_benefits</code> data.</li>
</ol>
</section>
</section>
</section>
<section id="model" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="model"><span class="header-section-number">5</span> 4. MODEL</h2>
<p>As highlighted in <a href="https://datascienceineducation.com/c03.html">Chapter 3 of Data Science in Education Using R</a>, the <strong>Model</strong> step of the data science process entails “using statistical models, from simple to complex, to understand trends and patterns in the data.” The authors note that while descriptive statistics and data visualization during the <strong>Explore</strong> step can help us to identify patterns and relationships in our data, statistical models can be used to help us determine if relationships, patterns and trends are actually meaningful.</p>
<p>In <a href="https://catalog.lib.ncsu.edu/catalog/NCSU4862134">Learning Analytics Goes to School</a>, the authors describe modeling as simply developing a mathematical summary of a dataset and note that there are two general types to modeling: unsupervised and supervised learning. Unsupervised learning algorithms, which will be the focus in this lab, are used to explore the structure of a dataset, while supervised models “help to quantify relationships between features and a known outcome.”</p>
<p>We will explore the use of models for text mining in future labs, but if you are interested in looking ahead to see how they might be applied to text as data, I recommend taking a look at <a href="https://www.tidytextmining.com/topicmodeling.html">Chapter 6 Topic Modeling</a> from Text Mining with R: A Tidy Approach. Chris Bail in his Text as Data course also provides a nice introduction to Topic Modeling, including Structural Topic Modeling, which we will explore using the <code>stm</code> package in future labs.</p>
<p>Finally, if you have not already done so, I ask that at minimum you read Chapter 3 of DSIEUR as well as the section on the Data-Intensive Research Workflow from Chapter 2 of Learning Analytics Goes to school.</p>
</section>
<section id="communicate" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="communicate"><span class="header-section-number">6</span> 5. COMMUNICATE</h2>
<p>The final(ish) step in our workflow/process is sharing the results of analysis with wider audience. Krumm et al.&nbsp;(2018) have outline the following 3-step process for communicating with education stakeholders what you have learned through analysis:</p>
<ol type="1">
<li><strong>Select</strong>. Communicating what one has learned involves selecting among those analyses that are most important and most useful to an intended audience, as well as selecting a form for displaying that information, such as a graph or table in static or interactive form, i.e.&nbsp;a “data product.”</li>
<li><strong>Polish</strong>. After creating initial versions of data products, research teams often spend time refining or polishing them, by adding or editing titles, labels, and notations and by working with colors and shapes to highlight key points.</li>
<li><strong>Narrate</strong>. Writing a narrative to accompany the data products involves, at a minimum, pairing a data product with its related research question, describing how best to interpret the data product, and explaining the ways in which the data product helps answer the research question.</li>
</ol>
<p>In this particular walkthrough, our target audience is developers of online professional learning opportunities who are looking to receive feedback on what’s working well and potential areas for improvement. This lets us assume a good deal of prior knowledge on their end about the context of the evaluation, a high level of familiarly with the online professional development resources being assessed, and fairly literate at reading and interpreting data and charts. This also lets us simplify our data products and narrative and reduce the level of detail needed to communicate useful information.</p>
<p>For summative evaluation, typically at the end of a school year or grant period when the emphasis is on assessing program outcomes and impact, our audience would extend to those less familiar with the program but with a vested interest in program’s success, such as the NC State Board of Education or those directly impacted by the program including NC educators is general. In that case, our data product would need to include much more narrative to provide context and greater detail in charts and graphs in order to help interpret the data presented.</p>
<section id="a.-select" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="a.-select"><span class="header-section-number">6.1</span> 5a. Select</h3>
<section id="analyses" class="level4" data-number="6.1.1">
<h4 data-number="6.1.1" class="anchored" data-anchor-id="analyses"><span class="header-section-number">6.1.1</span> <strong>Analyses</strong></h4>
<p>For analyses to present, I’m going to focus primarily on:</p>
<ol type="1">
<li><strong>Word Counts</strong>. One of the first things I’ll share with my audience is my analysis of word counts since these are very easy to interpret and will provide online PD developers with some instant insight.</li>
<li><strong>Word Search</strong>. I also think it’s important to include some actual participant responses for select key words in order to provide additional information about how those words are being used on context. I may handpick some select quotes or present a random selection of quotes.</li>
<li><strong>TF-IDF</strong>. Finally, as a way to potentially help them weed through words unique to specific resources, as well as potentially identify some areas for potential follow-up and to dig deeper, I’ll discuss</li>
</ol>
<p>I’ve decided to exclude analyses of just term frequency because I feel like simply counts are easier to quickly interpret while tf-idf provides more nuance. I also want to be careful not to overwhelm my audience.</p>
</section>
<section id="data-products" class="level4" data-number="6.1.2">
<h4 data-number="6.1.2" class="anchored" data-anchor-id="data-products"><span class="header-section-number">6.1.2</span> <strong>Data Products</strong></h4>
<p>In terms of “data products” and form, and because this is a simple demonstration for sharing analyses and our first experience in this lab with independently analysis, I’ll prepare my data product as a basic slide show that includes the following charts:</p>
<ol type="1">
<li><strong>Word Cloud</strong>. This is really as much decorative as it is a means to communicate key findings. I’ll probably include this on my title slide as a way to immediately engage my audience and provide a preview of findings I’ll share. It’s also a way to include common words that may not make the cut in my bar chart.</li>
<li><strong>Bar Chart</strong>. I’ll definitely share with them the bar chart I created earlier as a means to focus on the most common words used by teachers across all resources. Also, this is a little less busy than a word cloud and allows them to quickly see the top words in order.</li>
<li><strong>Quotes</strong>. As noted above, I also feel it’s important to provide some participants responses that help explain how the common words are being used in context.</li>
<li><strong>Small Multiples</strong>. Although at this point a little skeptical about how meaningful the tf-idf analysis was due to issues such as spelling as well as the limited number of responses for many resources, I think the small multiples chart will help to spark discussion among PD developers about specific aspects of each resource type that teachers’ value.</li>
</ol>
</section>
<section id="sharing-format" class="level4" data-number="6.1.3">
<h4 data-number="6.1.3" class="anchored" data-anchor-id="sharing-format"><span class="header-section-number">6.1.3</span> Sharing Format</h4>
<p>We’ll be using <a href="https://quarto.org/docs/get-started/hello/vscode.html#:~:text=qmd%20files%20contain%20a%20combination,you%20see%20on%20the%20right.">Quarto Markdown</a> to create a slide deck or short report that documents our independent analysis. Quarto Markdown files can also be used to create a wide range of outputs and formats, including polished PDF or Word documents, websites, web apps, journal articles, online books, interactive tutorials and more.</p>
</section>
</section>
<section id="b.-polish" class="level3" data-number="6.2">
<h3 data-number="6.2" class="anchored" data-anchor-id="b.-polish"><span class="header-section-number">6.2</span> 5b. Polish</h3>
<section id="word-cloud" class="level4" data-number="6.2.1">
<h4 data-number="6.2.1" class="anchored" data-anchor-id="word-cloud"><span class="header-section-number">6.2.1</span> Word Cloud</h4>
<p>To make the word cloud a little less busy and a little more useful, I removed the multitude of colors from the default setting, and I’ve defined a function that use the color black for words that occur more than 1000 times, and gray for the rest.</p>
<div id="f0a5b725" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> wordcloud <span class="im">import</span> WordCloud</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter word counts greater than 1000</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>words_count_above_1000 <span class="op">=</span> <span class="bu">set</span>(words_count[words_count[<span class="st">'count'</span>] <span class="op">&gt;</span> <span class="dv">1000</span>][<span class="st">'word'</span>])</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Define custom coloring function</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> color_func(word, font_size, position, orientation, random_state<span class="op">=</span><span class="va">None</span>, <span class="op">**</span>kwargs):</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> word <span class="kw">in</span> words_count_above_1000:</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'black'</span>  <span class="co"># Use black color for words occurring more than 1000 times</span></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'grey'</span>  <span class="co"># Use gray color for the rest</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate a word cloud with custom coloring function</span></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>wordcloud <span class="op">=</span> WordCloud(width<span class="op">=</span><span class="dv">800</span>, height<span class="op">=</span><span class="dv">500</span>, background_color<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>color_func<span class="op">=</span>color_func).generate_from_frequencies(<span class="bu">dict</span>(<span class="bu">zip</span>(words_count[<span class="st">'word'</span>], words_count[<span class="st">'count'</span>])))</span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the word cloud using matplotlib</span></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>plt.imshow(wordcloud, interpolation<span class="op">=</span><span class="st">'bilinear'</span>)</span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-1-case-study-python_files/figure-html/cell-36-output-1.png" width="611" height="389" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="bar-chart" class="level4" data-number="6.2.2">
<h4 data-number="6.2.2" class="anchored" data-anchor-id="bar-chart"><span class="header-section-number">6.2.2</span> Bar Chart</h4>
<p>For my bar chart, I did some minor clean up, including editing the x-axis title, removing the redundant y axis, and adding a title. If this were something for a more formal report, I’d probably finesse it even more, but it gets the point across.</p>
<div id="4b5e12fb" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter rows with word counts greater than 500</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>opd_filtered <span class="op">=</span> words_count[words_count[<span class="st">'count'</span>] <span class="op">&gt;</span> <span class="dv">500</span>]</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort the DataFrame by 'count' column</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>opd_sorted <span class="op">=</span> opd_filtered.sort_values(by<span class="op">=</span><span class="st">'count'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a bar plot</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>plt.barh(opd_sorted[<span class="st">'word'</span>], opd_sorted[<span class="st">'count'</span>], color<span class="op">=</span><span class="st">'skyblue'</span>)</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Count'</span>)</span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'20 Most Frequently Used Words to Describe the Value of Online Resources'</span>)</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>plt.gca().invert_yaxis()  <span class="co"># Invert y-axis to display words in descending order</span></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-1-case-study-python_files/figure-html/cell-37-output-1.png" width="869" height="523" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="small-multiples-1" class="level4" data-number="6.2.3">
<h4 data-number="6.2.3" class="anchored" data-anchor-id="small-multiples-1"><span class="header-section-number">6.2.3</span> Small Multiples</h4>
<p>Finally, one related issue that I want to clean up a little with respect to tf-idf before sharing with an outside audience is too few responses for the Calendar online learning resources. Therefore, I remove any response pertaining to Calendar. Again, if this were a chart destined for a more formal report, I’d also clean up the Resource names to make them more readable and fit properly on each bar plot.</p>
<div id="64860dff" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove rows with Resource equal to "Calendar"</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>opd_frequencies_filtered <span class="op">=</span> resource_word_counts[resource_word_counts[<span class="st">'Resource'</span>] <span class="op">!=</span> <span class="st">'Calendar'</span>]</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by Resource and select the top 5 words by proportion</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>top5_words_per_resource <span class="op">=</span> opd_frequencies_filtered.groupby(<span class="st">'Resource'</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.nlargest(<span class="dv">5</span>, <span class="st">'proportion'</span>)).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a catplot - combination of a categorical plot ('word' is a categorical variable) and a FacetGrid ('Resource' is facet)) and map a bar plot to each facet</span></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>plot <span class="op">=</span> sns.catplot(data<span class="op">=</span>top5_words_per_resource, kind<span class="op">=</span><span class="st">'bar'</span>, x<span class="op">=</span><span class="st">'proportion'</span>, y <span class="op">=</span> <span class="st">'word'</span>, col<span class="op">=</span><span class="st">'Resource'</span>, col_wrap<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Customizing the titles and set font size</span></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>plot.set_titles(col_template<span class="op">=</span><span class="st">"</span><span class="sc">{col_name}</span><span class="st">"</span>, size<span class="op">=</span><span class="dv">10</span>) </span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_1939/4129758193.py:7: DeprecationWarning: DataFrameGroupBy.apply operated on the grouping columns. This behavior is deprecated, and in a future version of pandas the grouping columns will be excluded from the operation. Either pass `include_groups=False` to exclude the groupings or explicitly select the grouping columns after groupby to silence this warning.
  top5_words_per_resource = opd_frequencies_filtered.groupby('Resource').apply(lambda x: x.nlargest(5, 'proportion')).reset_index(drop=True)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-1-case-study-python_files/figure-html/cell-38-output-2.png" width="1515" height="1430" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>